<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>ACM Affiliation Analyzer</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/prefixfree.min.js"></script>
  <script src='d3/d3.v3.min.js'></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>

    body, h1, h2 {
        color: #444;
        font-family: 'Helvetica Neue', Helvetica, sans-serif;
        font-weight: 300;
    }
    #graph {
        float: left;
        position: relative;
    }
    #notes {
        float: left;
        margin-left: 20px;
    }
    h1, h2, h3, h4, h5 {
        margin: 0;
    }
    h1 {
        font-size: 1.2em;
        margin-bottom: 0.2em;
    }
    h2 {
        font-size: 1em;
        margin-bottom: 1em;
    }
    ul {
        list-style: none;
        padding-left: 0;
    }
    li {
        padding-top: 0.2em;
    }
    .node circle, circle.node {
        cursor:       pointer;
        fill:         #ccc;
        stroke:       #fff;
        stroke-width: 1px;
    }
    .edge line, line.edge {
        cursor:       pointer;
        stroke:       #aaa;
        stroke-width: 2px;
    }
    .labelNode text, text.labelNode {
        cursor:       pointer;
        fill:        #444;
        font-size:   11px;
        font-weight: normal;
    }
    ul.connection {
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        cursor: pointer;
        font-size: 11px;
        font-weight: normal;
        padding: 10px;
        position: absolute;
    }
    ul.connection:before,
    ul.connection:after {
        border: 10px solid transparent;
        content: '';
        position: absolute;
    }
    ul.connection:before {
        border-bottom-color: #f0f0f0;
        top: -19px;
        left: 20px;
        z-index: 2;
    }
    ul.connection:after {
        border-bottom-color: rgba(0, 0, 0, 0.2);
        top: -21px;
        left: 20px;
        z-index: 1;
    }
    ul.connection.hidden {
        display: none;
    }

  </style>

</head>

<body>

<header>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#featured"><h1>ACM Affiliation Analyzer </h1></a>
      </div><!-- navbar-header -->
      <div class="collapse navbar-collapse" id="collapse">
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="#services">Home</a></li>
          <li><a href="#mission">About</a></li>
          <li><a href="#staff">Team</a></li>
        </ul>        
      </div><!-- collapse navbar-collapse -->
    </div><!-- container -->
  </nav>
</header>

<div class="main">
  <div class="page" id="services">
    <div class="container">
       
       <div id='graph'></div>
       <div id='notes'></div>
          <script>

// Define the dimensions of the visualization. We're using
// a size that's convenient for displaying the graphic on
// http://jsDataV.is

var width = 920,
    height = 680;

// Visual properties of the graph are next. We need to make
// those that are going to be animated accessible to the
// JavaScript.

var labelFill = '#444';
var adjLabelFill = '#000';
var edgeStroke = '#aaa';
var nodeFill = '#d95f0e';
var nodeRadius = 10;
var selectedNodeRadius = 30;

var linkDistance = Math.min(width,height)/6;

// Find the main graph container.

var graph = d3.select('#graph');

// Create the SVG container for the visualization and
// define its dimensions.

var svg = graph.append('svg')
    .attr('width', width)
    .attr('height', height);

// Select the container for the notes and dimension it.

var notes = d3.select('#notes')
    .style({
        'width': 190 + 'px',
        'height': height + 'px'
    });

// Utility function to update the position properties
// of an arbtrary edge that's part of a D3 selection.
// The optional parameter is the array of nodes for
// the edges. If present, the source and target properties
// are assumed to be indices in this array rather than
// direct references.

var positionEdge = function(edge, nodes) {
    edge.attr('x1', function(d) {
        return nodes ? nodes[d.source].x : d.source.x;
    }).attr('y1', function(d) {
        return nodes ? nodes[d.source].y : d.source.y;
    }).attr('x2', function(d) {
        return nodes ? nodes[d.target].x : d.target.x;
    }).attr('y2', function(d) {
        return nodes ? nodes[d.target].y : d.target.y;
    });
};

// Utility function to update the position properties
// of an arbitrary node that's part of a D3 selection.

var positionNode = function(node) {
    node.attr('transform', function(d) {
        return 'translate(' + d.x + ',' + d.y + ')';
    });
};

// Utility function to position text associated with
// a label pseudo-node. The optional third parameter
// requests transition to the specified fill color.

var positionLabelText = function(text, pseudonode, fillColor) {

    // What's the width of the text element?

    var textWidth = text.getBBox().width;

    // How far is the pseudo-node from the real one?

    var diffX = pseudonode.x - pseudonode.node.x;
    var diffY = pseudonode.y - pseudonode.node.y;
    var dist = Math.sqrt(diffX * diffX + diffY * diffY);

    // Shift in the x-direction a fraction of the text width

    var shiftX = textWidth * (diffX - dist) / (dist * 2);
    shiftX = Math.max(-textWidth, Math.min(0, shiftX));

    var shiftY = pseudonode.node.selected ? selectedNodeRadius : nodeRadius;
    shiftY = 0.5 * shiftY * diffY/Math.abs(diffY);

    var select = d3.select(text);
    if (fillColor) {
        select = select.transition().style('fill', fillColor);
    }
    select.attr('transform', 'translate(' + shiftX + ',' + shiftY + ')');
};


// Define the data.

data = [
  {
    "title": "Carnegie Mellon University",
    "numPub": "1407",
    "totalCol": 665,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research:0.74  Yahoo! Research:0.47   Stanford University:0.45 Google Inc.:0.42 Cornell University:0.39    Microsoft Corporation:0.34 Georgia Institute of Technology:0.32 University of Pittsburgh:0.31  EPFL:0.3 Tsinghua University:0.26",
    "collaborations": [
      "8,40",
      "16,23",
      "21,21",
      "24,20",
      "25,20",
      "26,19",
      "32,18",
      "35,18",
      "38,17",
      "45,17",
      "46,17",
      "47,17",
      "53,15",
      "86,11",
      "94,10",
      "97,10",
      "103,10"
    ]
  },
  {
    "title": "Microsoft Research",
    "numPub": "1169",
    "totalCol": 835,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Corporation: 2.86 University of Washington:1.42  University of Illinois at Urbana-Champaign:1.38  Carnegie Mellon University:1.26  University of Washington:1.05    Stanford University:0.78 Georgia Institute of Technology:0.75 Microsoft Research Ltd. United Kingdom:0.70  U. C. Berkeley:0.60  Microsoft Research Asia:0.59",
    "collaborations": [
      "1,96",
      "4,49",
      "7,40",
      "8,40",
      "11,32",
      "12,27",
      "13,26",
      "23,20",
      "44,17",
      "50,16",
      "52,15",
      "54,15",
      "66,14",
      "72,13",
      "73,13",
      "74,13",
      "89,11",
      "96,10",
      "98,10",
      "99,10"
    ]
  },
  {
    "title": "IBM Thomas J. Watson Research Center",
  "numPub": "949",
  "totalCol": 615,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "International Business Machines Corporation:3.02 Arizona State University:0.94  University of Illinois at Urbana-Champaign:0.91  SUNY at Binghamton:0.67  Georgia Institute of Technology:0.62 IBM Research Bengaluru India:0.61  Carnegie Mellon University:0.61  Johns Hopkins University:0.59    Virginia Tech.:0.54    Florida International University:0.53",
    "collaborations": [
      "3,71",
      "9,32",
      "16,23",
      "28,19",
      "33,18",
    "42,17",
      "63,14",
      "64,14",
      "65,14",
    "71,13",
      "82,12",
      "90,11",
      "95,10"
    ]
  },
  {
    "title": "U. C. Berkeley",
  "numPub": "855",
  "totalCol": 441,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research:0.9   Google Inc.:0.84 M.I.T.:0.81  Cadence Berkeley Laboratories:0.81 Stanford University:0.68 Carnegie Mellon University:0.64  Intel Research Berkeley:0.6  Microsoft Corporation:0.53 Cornell University:0.47    Yahoo! Research:0.45",
    "collaborations": [
      "11,32",
      "15,25",
      "22,20",
      "29,19",
      "34,18",
    "47,17",
      "59,14",
      "85,11"
    ]
  },
  {
    "title": "Stanford University",
  "numPub": "900",
  "totalCol": 433,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research:0.79  Cornell University:0.78    Carnegie Mellon University:0.77  M.I.T.:0.72  Google Inc.:0.55 Intel Research Berkeley:0.5  ETH Zurich:0.48  University of Maryland:0.47  Princeton University:0.46  U. C. Berkeley:0.46",
    "collaborations": [
      "4,49",
      "14,25",
      "37,17",
      "40,17",
      "46,17",
    "48,16",
      "58,14",
      "59,14",
      "69,13",
    "70,13",
      "79,13",
      "93,10",
    "101,10"
    ]
  },
  {
    "title": "University of Illinois at Urbana-Champaign",
  "numPub": "918",
  "totalCol": 432,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research:1.26  Purdue University:0.66   IBM Thomas J. Watson Research Center:0.59  Yahoo! Research:0.49 Microsoft Corporation:0.47 Microsoft Research Asia:0.45 University of Texas at Austin:0.37 Carnegie Mellon University:0.36  Indiana University:0.33    Zhejiang University:0.32",
    "collaborations": [
      "7,40",
      "9,32",
      "51,15",
      "56,14",
      "75,12",
    "76,12",
      "93,10",
      "94,10"
    ]
  },
  {
    "title": "M.I.T.",
  "numPub": "725",
  "totalCol": 378,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Stanford University:1.09 U. C. Berkeley:0.84  Yale University:0.79 EPFL:0.64  Microsoft Research:0.64  Mitsubishi Electric Research Laboratory:0.62 University of Southern California:0.49 Harvard:0.38 MIT CSAIL:0.38   University of Toronto:0.38",
    "collaborations": [
      "14,25",
      "29,19",
      "45,17",
      "64,14",
      "66,14",
    "87,11",
      "106,10"
    ]
  },
  {
    "title": "International Business Machines Corporation",
  "numPub": "674",
  "totalCol": 406,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "IBM Thomas J. Watson Research Center:3.63  IBM Research Bengaluru India:1.27  University of Texas at Austin:0.84 IBM Almaden Research Center:0.71 Carnegie Mellon University:0.7   Technion Haifa Israel:0.43 Queens University Canada:0.33    Oracle Corporation:0.29  University of Waterloo:0.29  IBM Research Austin:0.28",
    "collaborations": [
      "3,71",
      "10,32",
      "19,21",
      "43,17",
      "53,15",
    "81,12",
      "102,10"
    ]
  },
  {
    "title": "Microsoft Corporation",
  "numPub": "598",
  "totalCol": 389,
    "color": "#47738C",
    "text": "#0A0606",
    "si": "Microsoft Research:4.86 Carnegie Mellon University:1.1 Microsoft Research Asia:0.91  Yahoo! Research:0.89  University of Washington:0.89 University of Illinois at Urbana-Champaign:0.87 Microsoft Research Ltd. United Kingdom:0.78  Search and Information Extraction Lab India:0.74 Stanford University:0.65  U. C. Berkeley:0.60",
    "collaborations": [
      "1,96",
      "18,22",
      "20,21",
      "34,18",
      "35,18",
    "51,15",
      "67,14",
      "84,12",
      "91,11"
    ]
  },
  {
    "title": "The University of Tokyo",
  "numPub": "582",
  "totalCol": 264,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "National Institute of Informatics Japan:1.54  Tokyo Institute of Technology Japan: 1.42   Ecole Polytechnique  Japan:0.98 Brown University:0.93 University of Tsukuba Japan:0.84  Japan Science and Technology Corp.:0.77 National Institute of Advanced Industrial Science and Technology Japan:0.56 Bahcesehir University  Turkey:0.51  Osaka University Japan:0.42 Tohoku University  Japan:0.41",
    "collaborations": [
  
    ]
  },
  {
    "title": "University of Toronto",
  "numPub": "572",
  "totalCol": 280,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "University of Waterloo:0.59 Technion Haifa Israel:0.57  Carnegie Mellon University:0.53   University of California San Diego:0.51 Microsoft Research:0.46 Hewlett-Packard Labs:0.45 M.I.T.:0.39 Princeton University:0.39 University of Ottawa  Canada:0.35",
    "collaborations": [
      "32,18",
      "41,17",
      "62,14",
      "81,12",
      "89,11"
    ]
  },
  {
    "title": "Georgia Institute of Technology",
  "numPub": "555",
  "totalCol": 302,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Yahoo! Research:1.34  Microsoft Research:1.16 Carnegie Mellon University:0.84   Intel Research Berkeley:0.79    IBM Thomas J. Watson Research Center:0.68 Oak Ridge National Laboratory:0.58    Yahoo Inc.:0.56   Darmstadt University of Technology  Germany:0.53  Stanford University:0.39  U. C. Berkeley:0.36",
    "collaborations": [
      "13,26",
      "24,20",
      "33,18",
      "83,12",
      "88,11"
    ]
  },
  {
    "title": "Purdue University",
  "numPub": "555",
  "totalCol": 254,
    "color": "#47738C",
    "text": "#0A0606",
    "similar":"University of Illinois at Urbana-Champaign:1.42  Intel Research Berkeley:0.67  Microsoft Research:0.64 Northwestern University:0.47  Indiana University-Purdue University Indianapolis:0.38  Chinese Academy of Sciences:0.36  IBM Thomas J. Watson Research Center:0.35 IBM Thomas J. Watson Research Center:0.35   U. C. Berkeley:0.35 Indiana University:0.34   University of Maryland:0.34",
    "collaborations": [
      "98,10"
    ]
  },
  {
    "title": "UT Austin",
  "numPub": "554",
  "totalCol": 261,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Intel Research Berkeley:1.23  International Business Machines Corporation:0.89  Yahoo! Research:0.76  University of Illinois at Urbana-Champaign:0.72 Carnegie Mellon University:0.72   IBM Thomas J. Watson Research Center:0.60 Microsoft Research:0.47 Michigan State University:0.45    Stanford University:0.4 Georgia Institute of Technology:0.38",
    "collaborations": [
      "60,14",
    "63,14",
      "75,12",
      "88,11",
      "102,10",
      "103,10"
    ]
  },
  {
    "title": "Cornell University",
  "numPub": "544",
  "totalCol": 242,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Stanford University:1.3 Yahoo! Research:1.3 Carnegie Mellon University:1.13   Microsoft Research:0.9  Technion Haifa Israel:0.59  California Institute of Technology:0.55 U. C. Berkeley:0.53 Google Inc.:0.47  EPFL:0.44 University of Saskatchewan   Canada:0.43",
    "collaborations": [
      "23,20",
      "26,19",
      "27,19",
      "40,17",
      "90,11"
    ]
  },
  {
    "title": "Tsinghua University",
  "numPub": "532",
  "totalCol": 314,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research Asia:3.16  National University of Singapore:1.03 Hong Kong University of Science and Technology:0.68 Carnegie Mellon University:0.61   IBM Thomas J. Watson Research Center:0.51 University of Illinois at Urbana-Champaign:0.49 Zhejiang University:0.44  Peking University:0.43    Chinese Academy of Sciences:0.39  Hewlett-Packard Labs:0.39",
    "collaborations": [
      "2,73",
      "49,16",
      "57,14",
      "61,14",
      "91,11"
    ]
  },
  {
    "title": "National University of Singapore",
  "numPub": "529",
  "totalCol": 300,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Institute for Infocomm Research Singapore:1.6 Tsinghua University:1.28  Nanyang Technological University:0.67 Intel Research Berkeley:0.53  Chinese Academy of Sciences:0.44  Beijing University of Aeronautics and Astronautics  China:0.42  University of Southern California:0.41  Microsoft Research:0.38 Univ. of Illinois at Chicago:0.37   Durham University  United Kingdom:0.36",
    "collaborations": [
      "49,16",
      "92,11",
      "105,10"
    ]
  },
  {
    "title": "University of Maryland",
  "numPub": "522",
  "totalCol": 250,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research: 1.05  Stanford University:0.95  Fraunhofer Center:0.55  Bell Laboratories:0.55  U. C. Berkeley:0.4  IBM Research Bengaluru India:0.39 IBM Thomas J. Watson Research Center:0.39 University of Genoa  Italy:0.37 Purdue University:0.36  NEC Laboratories:0.32",
    "collaborations": [
      "50,16",
      "78,12"
    ]
  },
  {
    "title": "University of Southern California",
  "numPub": "522",
  "totalCol": 216,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "M.I.T.:0.48 Indian Institute of Science  India:0.44 Virginia Tech.:0.43 National University of Singapore:0.36 California Institute of Technology:0.25 IBM Thomas J. Watson Research Center:0.24 Columbia University:0.23  Naval Postgraduate School  California:0.22  Purdue University:0.22  Avaya Labs USA:0.21",
    "collaborations": [
     
    ]
  },
  {
    "title": "Yahoo! Research",
  "numPub": "486",
  "totalCol": 326,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Georgia Institute of Technology:1.64  Carnegie Mellon University:1.51   Cornell University:0.45 Yahoo! Research Barcelona and Latinamerica:1.26 Yahoo Inc.:1.15 University of Illinois at Urbana-Champaign:1.02 Microsoft Corporation:0.99  Google Inc.:0.89  University of Massachusetts:0.83  Microsoft Research:0.80",
    "collaborations": [
      "25,20",
      "27,19",
      "39,17",
      "67,14",
      "70,13",
      "80,12",
      "83,12",
      "108,10"
    ]
  },
  {
    "title": "ETH Zurich",
  "numPub": "480",
  "totalCol": 249,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Stanford University:0.95  Carnegie Mellon University:0.72   Technische Universitat Munchen:0.70 U. C. Berkeley:0.59  INRIA:0.54 Microsoft Research:0.52 Aarhus University Denmark:0.5 Technion Haifa Israel:0.5 Oracle Corporation:0.46 IBM Research Switzerland:0.39",
    "collaborations": [
      "69,13",
      "74,13"
    ]
  },
  {
    "title": "University of Massachusetts",
  "numPub": "478",
  "totalCol": 166,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research:0.83  Yahoo! Research:0.68  Carnegie Mellon University:0.63  Technion Haifa Israel:0.55  UCLA:0.48  Microsoft Corporation:0.48  University of Colorado at Boulder:0.47   Kansas State University:0.37  Yahoo Inc.:0.29   Google Inc.:0.26",
    "collaborations": [
      "80,12"
    ]
  },
  {
    "title": "University of Waterloo",
  "numPub": "467",
  "totalCol": 206,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Simon Fraser University:0.65   University of Toronto:0.64  University of Calgary Canada:0.53  University of Washington:0.43  University of Victoria Canada:0.4   Tsinghua University:0.3  Microsoft Corporation:0.29   International Business Machines Corporation:0.29   University of Bergen Norway:0.28   Hong Kong University of Science and Technology:0.27",
    "collaborations": [
      "41,17"
    ]
  },
  {
    "title": "UC San Diego",
  "numPub": "461",
  "totalCol": 248,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "University of Toronto:0.95   Yahoo! Research:0.87   Stanford University:0.86   AT&T Labs Research:0.72  Apple Inc.:0.68   Hewlett-Packard Labs:0.59   University of California Davis:0.56  Microsoft Research:0.41  Swarthmore College:0.4",
    "collaborations": [
      "107,10"
    ]
  },
  {
    "title": "Microsoft Research Asia",
  "numPub": "457",
  "totalCol": 396,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Tsinghua University:6.04  Univ. of Sci. and Tech. of China:3.87 Hong Kong University of Science and Technology:3.56 Zhejiang University:2.45  Peking University:2.22   Shanghai Jiao Tong University: 1.85  Chinese Academy of Sciences:1.79    Microsoft Research:1.57  Microsoft Corporation:1.41  University of Illinois at Urbana-Champaign:1.29",
    "collaborations": [
      "2,73",
      "5,45",
      "6,42",
      "20,21",
      "36,17",
    "44,17",
      "55,15",
      "76,12",
      "92,11"
    ]
  },
  {
    "title": "University of Wisconsin-Madison",
  "numPub": "438",
  "totalCol": 198,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Intel Research Berkeley:1.46  Microsoft Research:1,34  Microsoft Corporation:1.14   NEC Laboratories:0.7  IBM Almaden Research Center:0.59  The Pennsylvania State University:0.53   Texas State University - San Marcos:0.51   IBM Thomas J. Watson Research Center:0.49    eBay Inc.:0.49   Carnegie Mellon University:0.47",
    "collaborations": [
      "30,19",
      "54,15",
      "84,12"
    ]
  },
  {
    "title": "IBM Almaden Research Center",
  "numPub": "430",
  "totalCol": 258,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "International Business Machines Corporation:1.73   IBM Thomas J. Watson Research Center:1.43   IBM Research Bengaluru India:1.28 M.I.T.:0.89    The Pennsylvania State University:0.77   Wright State University:0.76  UC Santa Cruz:0.67   Stanford University:0.65  Univ. of Helsinki Finland:0.64   University of Wisconsin-Madison:0.6",
    "collaborations": [
      "10,32",
      "28,19",
      "30,19",
      "79,12",
      "87,11"
    ]
  },
  {
    "title": "Technion Haifa Israel",
  "numPub": "423",
  "totalCol": 230,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "University of Toronto:0.92  University of Massachusetts:0.92  Cornell University:0.91  Tel Aviv University:0.82  Hebrew University:0.8  Yahoo! Research:0.69   International Business Machines Corporation:0.65   IBM Research Lab in Haifa:0.65   ETH Zurich:0.64  The Weizmann Institute of Science  Israel:0.53",
    "collaborations": [
      "31,18",
      "43,17",
      "62,14",
      "73,13",
      "82,12",
    "100,10",
    "108,10"
    ]
  },
  {
    "title": "UCLA",
  "numPub": "422",
  "totalCol": 211,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "University of Massachusetts:0.72  Yahoo! Research:0.45   Tel Aviv University:0.43  U. C. Berkeley:0.42  Carnegie Mellon University:0.42   Stanford University:0.4  Technion Haifa Israel:0.4   Northwestern University:0.39   Technische Universitaet Berlin Germany:0.38  Shanghai Jiao Tong University:0.36",
    "collaborations": [
      
    ]
  },
  {
    "title": "The Pennsylvania State University",
  "numPub": "402",
  "totalCol": 201,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "The Smith-Kettlewell Eye Research Institute:0.83 Yahoo! Research:0.75 Microsoft Research Ltd. United Kingdom:0.64  University of Toronto:0.57 Ludwig-Maximilians-Universitaet Germany:0.54 Google Inc.:0.46 Tel Aviv University:0.41    New York University:0.4   Microsoft Research:0.36  University of Virginia:0.33  University of Illinois at Urbana-Champaign:0.33",
    "collaborations": [
      
    ]
  },
  {
    "title": "UC Irvine",
  "numPub": "396",
  "totalCol": 177,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "University of California Riverside:0.72  Rice University:0.48  U. of Illinois:0.4   Microsoft Research:0.38  Brown University:0.34 Tsinghua University:0.31     Dipartmento di Elettronica e Informazione Italy:0.3   University of Bern:0.28   Univ. of Texas at San Antonio:0.27   IBM Research Bengaluru India:0.25",
    "collaborations": [
      "97,10"
    ]
  },
  {
    "title": "Technical University of Munich",
  "numPub": "390",
  "totalCol": 178,
    "color": "#47738C",
    "text": "#0A0606",
    "collaborations": [
      
    ]
  },
  {
    "title": "Bell Laboratories",
  "numPub": "387",
  "totalCol": 208,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "University of Maryland:1.01   Princeton University:0.88    Lucent Technologies:0.68   Carnegie Mellon University:0.5   Microsoft Research:0.46   Iowa State University:0.46   University of California Santa Barbara:0.44   University of Washington:0.41   Michigan Technological University:0.41  Mentor Graphics Corp.:0.39",
    "collaborations": [
      "68,13",
      "78,12"
    ]
  },
  {
    "title": "University of British Columbia",
  "numPub": "383",
  "totalCol": 167,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Carnegie Mellon University:0.72   Unisinos Brazil:0.55   Microsoft Research:0.46   Stanford University:0.44    Korea University:0.36   Tel Aviv University:0.34   Simon Fraser University:0.34  Dalhousie University  Canada:0.32   University of Washington:0.27",
    "collaborations": [
      
    ]
  },
  {
    "title": "Intel Research Berkeley",
  "numPub": "379",
  "totalCol": 282,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "University of Texas at Austin:1.89  Georgia Institute of Technology:1.41   Stanford University:1.38   U. C. Berkeley:1.11  University of Wisconsin-Madison:1.01   Purdue University:0.86  National University of Singapore:0.83  Univ. of Sci. and Tech. of China:0.83  Microsoft Research:0.68",
    "collaborations": [
      "15,25",
      "21,21",
      "56,14",
      "60,14",
      "101,10",
    "107,10"
    ]
  },
  {
    "title": "Chinese Academy of Sciences",
  "numPub": "373",
  "totalCol": 199,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Graduate University of Chinese Academy of Sciences:1.48  Microsoft Research Asia:1.14 Beijing University of Posts and Telecommunications Technology:0,7    Co. Ltd Beijing China:0.6  Peking University:0.58  Univ. of Sci. and Tech. of China:0.48 Tsinghua University:0.44   Carnegie Mellon University:0.44    National University of Singapore:0.43 IBM Research Bengaluru India:0.31 Purdue University:0.3",
    "collaborations": [
      "55,15",
      "104,10"
    ]
  },
  {
    "title": "Google Inc",
  "numPub": "363",
  "totalCol": 199,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Carnegie Mellon University:1.84  U. C. Berkeley:1.48  Stanford University:1,42     Yahoo! Research:1.23 Microsoft Research:1.03  Cornell University:0.72  Google Switzerland GmbH:0.61  University of Illinois at Urbana-Champaign:0.61 Duke University:0.48  The Pennsylvania State University:0.47",
    "collaborations": [
      "22,20",
      "38,17",
      "39,17",
      "48,16",
      "52,15"
    ]
  },
  {
    "title": "IBM Research Bengaluru India",
  "numPub": "363",
  "totalCol": 241,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "International Business Machines Corporation:1.97  IBM Thomas J. Watson Research Center:1.14  IBM Almaden Research Center:0.82  Georgia Institute of Technology:0.52  Carnegie Mellon University:0.51  University of Maryland:0.51 Yahoo! Research:0.5 Chinese Academy of Sciences:0.49  University of Kaiserslautern Germany:0.46 IBM Research Switzerland:0.44",
    "collaborations": [
      "19,21",
      "42,17",
      "99,10",
      "100,10"
    ]
  },
  {
    "title": "Tel Aviv University",
  "numPub": "291",
  "totalCol": 197,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Technion Haifa Israel:1.4 Ben-Gurion University of the Negev  Israel:1.38 Hebrew University:1.38  Darmstadt University of Technology  Germany:1.09  Microsoft Research:0.97 IBM Thomas J. Watson Research Center:0.95 Hong Kong University of Science and Technology:0.81   UCLA:0.81 University of British Columbia:0.74 University of Toronto:0.69",
    "collaborations": [
      "31,18",
      "96,10"
    ]
  },
  {
    "title": "Hewlett-Packard Labs",
  "numPub": "300",
  "totalCol": 193,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Stanford University:1.15   Shanghai Jiao Tong University:0.88 Tsinghua University:0.8 University of Toronto:0.79  University of Illinois at Urbana-Champaign:0.75 University of Michigan:0.54 University of California San Diego:0.52 Microsoft Research:0.46 University of Trento  Italy:0.44",
    "collaborations": [
      "58,14"
    ]
  },
  {
    "title": "Columbia University",
  "numPub": "336",
  "totalCol": 185,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "IBM Thomas J. Watson Research Center:0.88 Stanford University:0.8 Yahoo! Research:0.63  University of Southern California:0.42  U. C. Berkeley:0.42 Princeton University:0.41 Microsoft Research:0.4  The City University of New York:0.35  IBM Research Bengaluru India:0.35 Palo Alto Research Center:0.34",
    "collaborations": [
      "65,14"
    ]
  },
  {
    "title": "Hong Kong University of Science and Technology",
    "numPub": "333",
    "totalCol": 231,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research Asia:3.98  City University of Hong Kong:1.81 Tsinghua University:1.46  Shanghai Jiao Tong University:1.4 Imperial College:1.09 The Chinese University of Hong Kong:0.98  Peking University:0.89  Huazhong University of Science and Technology  China:0.84 Jiangxi University of Finance and Economics  China:0.72 Sun Yat-Sen University  China:0.6",
    "collaborations": [
      "5,45",
      "17,22",
      "57,14"
    ]
  },
  {
    "title": "EPFL",
    "numPub": "333",
    "totalCol": 195,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Carnegie Mellon University:1.17 IDIAP Research Institute Martigny Switzerland:1.03 M.I.T.:0.94  University of Washington:0.91  Clariant International Switzerland:0.88  Cornell University:0.6 University of Alcala:0.47  University of Texas at Austin:0.45 Microsoft Research:0.44    University of Vienna Austria:0.44",
    "collaborations": [
      "106,10"
    ]
  },
  {
    "title": "Princeton University",
  "numPub": "330",
  "totalCol": 185,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "NEC Laboratories:3.16 Microsoft Research:1.4  Stanford University:1.35  AT&T Labs Research:1.07 Fujitsu Laboratories of America:1.02  Communication Systems and Software Agere Systems:0.82 Cadence Berkeley Laboratories:0.77  U. C. Berkeley:0.75 University of Toronto:0.72  Rutgers University:0.70",
    "collaborations": [
      "37,17",
      "68,13",
      "72,13",
      "77,12",
      "85,11",
    "98,10"
    ]
  },
  {
    "title": "Rutgers University",
  "numPub": "325",
  "totalCol": 203,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Louisiana State University:1.88 Microsoft Research:1.15 Princeton University:0.85 Carnegie Mellon University:0.74   Wayne State University:0.68 University of North Carolina at Chapel Hill:0.63  Tsinghua University:0.58  U. of Illinois:0.54 University of South Carolina:0.54 Univ. of Sci. and Tech. of China:0.49",
    "collaborations": [
      "71,13",
      "77,12"
    ]
  },
  {
    "title": "Arizona State University",
  "numPub": "307",
  "totalCol": 177,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "IBM Thomas J. Watson Research Center:1.34 University of Torino  Italy:1.11  Carnegie Mellon University:0.77 Yahoo! Research:0.47  Intel Research Berkeley:0.43  Universita de Provence  France:0.39 National University of Singapore:0.40 Tsinghua University:0.37 Banner Good Samaritan Medical Center:0.34 University of Nebraska:0.34",
    "collaborations": [
      "86,11",
      "95,10"
    ]
  },
  {
    "title": "INRIA",
  "numPub": "316",
  "totalCol": 210,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "IRISA France:2.48 ETH Zurich:1.5  CNRS France:1.25  Advanced Computer Applications Center:0.99  Texas A&M University:0.91 University of Calgary Canada:0.74 Univ. Paris XI:0.67 Laboratoire dInformatique de Grenoble-UJF  France:0.66  University of Washington:0.61 IBM Research Bengaluru India:0.61",
    "collaborations": [
      
    ]
  },
  {
    "title": "Microsoft Research Ltd. United Kingdom",
  "numPub": "285",
  "totalCol": 225,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research:3.5  Microsoft Corporation:2.28  University of Amsterdam  The Netherlands:1.95 Max Planck Institute for Software Systems Germany:1.26   Carnegie Mellon University:1.22  University College London:1.16  New York University:1.15  University of Cambridge:1.14  University of Sheffield United Kingdom:0.92 University of New South Wales Australia:0.9",
    "collaborations": [
      "12,27",
      "18,22"
    ]
  },
  {
    "title": "Peking University",
    "numPub": "298",
    "totalCol": 180,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Microsoft Research Asia:1.99    Chinese Academy of Sciences:0.84 Tsinghua University:0.75 Hong Kong University of Science and Technology:0.72    Singapore Management University:0.55   The Chinese University of Hong Kong:0.53 Virginia Tech:0.51 City University of Hong Kong:0.45  North Carolina State University:0.44  IBM China Research Lab:0.42",
    "collaborations": [
      "6,42",
      "61,14",
      "104,10",
      "105,10"
    ]
  },
  {
    "title": "The Chinese University of Hong Kong",
  "numPub": "312",
  "totalCol": 151,
    "color": "#47738C",
    "text": "#0A0606",
    "similar": "Hong Kong University of Science and Technology:0.99 Microsoft Research Asia:0.99  Nanyang Technological University:0.98 Microsoft Research:0.77 Peking University:0.67  City University of Hong Kong:0.61 Simon Fraser University:0.59  Fudan University:0.45 East China Normal University:0.42   University of Illinois at Urbana-Champaign:0.42",
    "collaborations": [
      "17,22",
      "36,17"
    ]
  }
 
];
  

// Find the graph nodes from the data set. Each
// university is a separate node.
var nodes = data.map(function(entry, idx, list) {

    // This iteration returns a new object for each node.
    var node = {};

    // We retain some of the university's properties.
    node.title    = entry.title;
    node.subtitle = entry.totalCol;
    node.subtitle2= entry.numPub;
    node.subtitle3= entry.similar;
    node.color    = entry.color;
    node.text     = entry.text;

    // copy the collaborations, 
    // "link" to an individual connection between nodes
    node.links = entry.collaborations.slice(0);

    // As long as we're iterating through the nodes array, 
    // create an initial position for the nodes. 
    var radius = 0.4 * Math.min(height,width);
    var theta = idx*2*Math.PI / list.length;
    node.x = (width/2) + radius*Math.sin(theta);
    node.y = (height/2) + radius*Math.cos(theta);

    // Return the newly created object so it can be added to the nodes array.
    return node;
});

// Identify all the indivual links between nodes on the graph
var links = [];

      // Start by iterating through the universities.
      data.forEach(function(srcNode, srcIdx, srcList) {

        // For each university, iterate through the collaborations.
        srcNode.collaborations.forEach(function(srcLink) {

          // For each university in the "src" node, iterate
          // through the remaining nodes in the list.
          for (var tgtIdx = srcIdx + 1;
               tgtIdx < srcList.length;
               tgtIdx++) {

            // Use a variable to refer to the "tgt" node for convenience.
            var tgtNode = srcList[tgtIdx];

            // Is there any university in the "tgt"
            // node that matches the university we're
            // currently considering from the "src" node?
            if (tgtNode.collaborations.some(function(tgtLink){
              return tgtLink === srcLink;
            })) {

              // When we do find a match, add a new
              // link to the links array.
              links.push({
                source: srcIdx,
                target: tgtIdx,
                link: srcLink
              });
            }
          }
        });
      });

// Now create the edges for our graph. We do that by
// eliminating duplicates from the links array.
var edges = [];

// Iterate through the links array.
links.forEach(function(link) {

    // Assume for now that the current link is
    // unique.
    var existingEdge = false;

    // Look through the edges we've collected so
    // far to see if the current link is already
    // present.
    for (var idx = 0; idx < edges.length; idx++) {

        // A duplicate link has the same source
        // and target values.
        if ((link.source === edges[idx].source) &&
            (link.target === edges[idx].target)) {

            // When we find an existing link, remember it.
            existingEdge = edges[idx];

            // And stop looking.
            break;
        }
    }

    // If we found an existing edge, all we need
    // to do is add the current link to it.
    if (existingEdge) {

        existingEdge.links.push(link.link);

    } else {

        // If there was no existing edge, we can
        // create one now.
        edges.push({
            source: link.source,
            target: link.target,
            links: [link.link]
        });
    }
});

// Start the creation of the graph by adding the edges.
// We add these first so they'll appear "underneath"
// the nodes.
var edgeSelection = svg.selectAll('.edge')
    .data(edges)
    .enter()
    .append('line')
    .classed('edge', true)
    .style('stroke', edgeStroke)
    .call(positionEdge, nodes);

// Next up are the nodes.
var nodeSelection = svg.selectAll('.node')
    .data(nodes)
    .enter()
    .append('g')
    .classed('node', true)
    .call(positionNode);

nodeSelection.append('circle')
    .attr('r', nodeRadius)
    .attr('data-node-index', function(d,i) { return i;})
    .style("fill", function(node) {            
              if (node.subtitle <= 800 ) {
                if (node.subtitle <= 600)
                    {if (node.subtitle <= 400) {
                      if (node.subtitle <= 200){return "#dd1c77"}
                    return "#7fcdbb"}
                return "#C3A550"}
              return "#0a3ea3"}
             
              else {return "#de2d26"}
                });

// Now that we have our main selections (edges and
// nodes), we can create some subsets of those
// selections that will be helpful. Those subsets
// will be tied to individual nodes, so we'll
// start by iterating through them. We do that
// in two separate passes.
nodeSelection.each(function(node){

    // First let's identify all edges that are
    // incident to the node. We collect those as
    // a D3 selection so we can manipulate the
    // set easily with D3 utilities.
    node.incidentEdgeSelection = edgeSelection
        .filter(function(edge) {
            return nodes[edge.source] === node ||
                   nodes[edge.target] === node;
        });
});

// Now make a second pass through the nodes.
nodeSelection.each(function(node){

    // For this pass we want to find all adjacencies.
    // An adjacent node shares an edge with the
    // current node.
    node.adjacentNodeSelection = nodeSelection
        .filter(function(otherNode){

            // Presume that the nodes are not adjacent.
            var isAdjacent = false;

            // We can't be adjacent to ourselves.
            if (otherNode !== node) {

                // Look the incident edges of both nodes to
                // see if there are any in common.
                node.incidentEdgeSelection.each(function(edge){
                    otherNode.incidentEdgeSelection.each(function(otherEdge){
                        if (edge === otherEdge) {
                            isAdjacent = true;
                        }
                    });
                });

            }

            return isAdjacent;
        });

});

// Next we create a array for the node labels.
// We're going to use a "hidden" force layout to
// position the labels so they don't overlap
// each other. ("Hidden" because the links won't
// be visible.)
var labels = [];
var labelLinks = [];

nodes.forEach(function(node, idx){

    // For each node on the graph we create
    // two pseudo-nodes for its label. Once
    // pseudo-node will be anchored to the
    // center of the real node, while the
    // second will be linked to that node.

    // Add the pseudo-nodes to their array.

    labels.push({node: node});
    labels.push({node: node});

    // And create a link between them.

    labelLinks.push({
        source: idx * 2,
        target: idx * 2 + 1
    });
});

// Construct the selections for the label layout.

// There's no need to add any markup for the
// pseudo-links between the label nodes, but
// we do need a selection so we can run the
// force layout.

var labelLinkSelection = svg.selectAll('line.labelLink')
    .data(labelLinks);

// The label pseud-nodes themselves are just
// `<g>` containers.

var labelSelection = svg.selectAll('g.labelNode')
    .data(labels)
    .enter()
    .append('g')
        .classed('labelNode',true);

// Now add the text itself. Of the paired
// pseudo-nodes, only odd ones get the text
// elements.

labelSelection.append('text')
    .text(function(d, i) {
        return i % 2 == 0 ? '' : d.node.title;
    })
    .attr('data-node-index', function(d, i){
        return i % 2 == 0 ? 'none' : Math.floor(i/2);
    });

// The last bit of markup are the lists of
// connections for each link.

var connectionSelection = graph.selectAll('ul.connection')
    .data(edges)
    .enter()
    .append('ul')
    .classed('connection hidden', true)
    .attr('data-edge-index', function(d,i) {return i;});

connectionSelection.each(function(connection){
    var selection = d3.select(this);
    connection.links.forEach(function(link){
        selection.append('li')
            .text(link);
    })
})

// Create the main force layout.

var force = d3.layout.force()
    .size([width, height])
    .nodes(nodes)
    .links(edges)
    .linkDistance(linkDistance)
    .charge(-500);

// Create the force layout for the labels.

var labelForce = d3.layout.force()
    .size([width, height])
    .nodes(labels)
    .links(labelLinks)
    .gravity(0)
    .linkDistance(0)
    .linkStrength(0.8)
    .charge(-100);

// Let users drag the nodes.

nodeSelection.call(force.drag);

// Function to handle clicks on node elements

var nodeClicked = function(node) {

    // Ignore events based on dragging.

    if (d3.event.defaultPrevented) return;

    // Remember whether or not the clicked
    // node is currently selected.

    var selected = node.selected;

    // Keep track of the desired text color.

    var fillColor;

    // In all cases we start by resetting
    // all the nodes and edges to their
    // de-selected state. We may override
    // this transition for some nodes and
    // edges later.

    nodeSelection
        .each(function(node) { node.selected = false; })
        .selectAll('circle')
            .transition()
            .attr('r', nodeRadius)
            .style("fill", function(node) {            
              if (node.subtitle <= 800 ) {
                if (node.subtitle <= 600)
                    {if (node.subtitle <= 400) {
                      if (node.subtitle <= 200){return "#dd1c77"}
                    return "#7fcdbb"}
                return "#C3A550"}
              return "#0a3ea3"}
             
              else {return "#de2d26"}
                });

    edgeSelection
        .transition()
        .style('stroke', edgeStroke);

    labelSelection
        .transition()
        .style('opacity', 0);

    // Now see if the node wasn't previously selected.

    if (!selected) {

        // This node wasn't selected before, so
        // we want to select it now. That means
        // changing the styles of some of the
        // elements in the graph.

        // First we transition the incident edges.

        node.incidentEdgeSelection
            .transition()
            .style('stroke', node.color);

        // Now we transition the adjacent nodes.

        node.adjacentNodeSelection.selectAll('circle')
            .transition()
            .attr('r', nodeRadius)
            .style('fill', node.color);

        labelSelection
            .filter(function(label) {
                var adjacent = false;
                node.adjacentNodeSelection.each(function(d){
                    if (label.node === d) {
                        adjacent = true;
                    }
                })
                return adjacent;
            })
            .transition()
            .style('opacity', 1)
            .selectAll('text')
                .style('fill', adjLabelFill);

        // And finally, transition the node itself.

        d3.selectAll('circle[data-node-index="'+node.index+'"]')
            .transition()
            .attr('r', selectedNodeRadius)
            .style('fill', node.color);

        // Make sure the node's label is visible

        labelSelection
            .filter(function(label) {return label.node === node;})
            .transition()
            .style('opacity', 1);

        // And note the desired color for bundling with
        // the transition of the label position.

        fillColor = node.text;

        // Delete the current notes section to prepare
        // for new information.

        notes.selectAll('*').remove();

        // Fill in the notes section with informationm
        // from the node. Because we want to transition
        // this to match the transitions on the graph,
        // we first set it's opacity to 0.

        notes.style({'opacity': 0});

        // Now add the notes content.
        notes.append('div')
                .append('img')
                .attr('src', 'images/legend.jpg');
        notes.append('h1').text(node.title);
        notes.append('h4').text(function(node) {
          return 'Total number of papers:' 
        });
        notes.append('h4').text(node.subtitle2);
        notes.append('h4').text(function(node) {
          return 'Total number of papers with collaboration:' 
        });
        notes.append('h4').text(node.subtitle);
        notes.append('h1').text(function(node) {
          return 'Most similar universities:' 
        });
        notes.append('h4').text(node.subtitle3);
        
       
    
    //if (node.url && node.image) {
        //    notes.append('div')
        //        .classed('artwork',true)
        //        .append('a')
        //        .attr('href', node.url)
        //        .append('img')
        //            .attr('src', node.image);
        //}
        //var list = notes.append('ul');
        //node.links.forEach(function(link){
        //    list.append('li')
        //        .text(link);
        //})

        // With the content in place, transition
        // the opacity to make it visible.

        notes.transition().style({'opacity': 1});

    } else {

        // Since we're de-selecting the current
        // node, transition the notes section
        // and then remove it.

        notes.transition()
            .style({'opacity': 0})
            .each('end', function(){
                notes.selectAll('*').remove();
            });

        // Transition all the labels to their
        // default styles.

        labelSelection
            .transition()
            .style('opacity', 1)
            .selectAll('text')
                .style('fill', labelFill);

        // The fill color for the current node's
        // label must also be bundled with its
        // position transition.

        fillColor = labelFill;
    }

    // Toggle the selection state for the node.

    node.selected = !selected;

    // Update the position of the label text.

    var text = d3.select('text[data-node-index="'+node.index+'"]').node();
    var label = null;
    labelSelection.each(function(d){
        if (d.node === node) { label = d; }
    })

    if (text && label) {
        positionLabelText(text, label, fillColor);
    }

};

// Function to handle click on edges.

var edgeClicked = function(edge, idx) {

    // Remember the current selection state of the edge.

    var selected = edge.selected;

    // Transition all connections to hidden. If the
    // current edge needs to be displayed, it's transition
    // will be overridden shortly.

    connectionSelection
        .each(function(edge) { edge.selected = false; })
        .transition()
        .style('opacity', 0)
        .each('end', function(){
            d3.select(this).classed('hidden', true);
        });

    // If the current edge wasn't selected before, we
    // want to transition it to the selected state now.

    if (!selected) {
        d3.select('ul.connection[data-edge-index="'+idx+'"]')
            .classed('hidden', false)
            .style('opacity', 0)
            .transition()
            .style('opacity', 1);
    }

    // Toggle the resulting selection state for the edge.

    edge.selected = !selected;

};

// Handle clicks on the nodes.

nodeSelection.on('click', nodeClicked);

labelSelection.on('click', function(pseudonode) {
    nodeClicked(pseudonode.node);
});

// Handle clicks on the edges.

edgeSelection.on('click', edgeClicked);
connectionSelection.on('click', edgeClicked);

// Animate the force layout.

force.on('tick', function() {

    // Constrain all the nodes to remain in the
    // graph container.

    nodeSelection.each(function(node) {
        node.x = Math.max(node.x, 2*selectedNodeRadius);
        node.y = Math.max(node.y, 2*selectedNodeRadius);
        node.x = Math.min(node.x, width-2*selectedNodeRadius);
        node.y = Math.min(node.y, height-2*selectedNodeRadius);
    });

    // Kick the label layout to make sure it doesn't
    // finish while the main layout is still running.

    labelForce.start();

    // Calculate the positions of the label nodes.

    labelSelection.each(function(label, idx) {

        // Label pseudo-nodes come in pairs. We
        // treat odd and even nodes differently.

        if(idx % 2) {

            // Odd pseudo-nodes have the actual text.
            // That text needs a real position. The
            // pseudo-node itself we leave to the
            // force layout to position.

            positionLabelText(this.childNodes[0], label);

        } else {

            // Even pseudo-nodes (which have no text)
            // are fixed to the center of the
            // corresponding real node. This will
            // override the position calculated by
            // the force layout.

            label.x = label.node.x;
            label.y = label.node.y;

        }
    });

    // Calculate the position for the connection lists.

    connectionSelection.each(function(connection){
        var x = (connection.source.x + connection.target.x)/2 - 27;
        var y = (connection.source.y + connection.target.y)/2;
        d3.select(this)
            .style({
                'top':  y + 'px',
                'left': x + 'px'
            });
    });

    // Update the posistions of the nodes and edges.

    nodeSelection.call(positionNode);
    labelSelection.call(positionNode);
    edgeSelection.call(positionEdge);
    labelLinkSelection.call(positionEdge);

});

// Start the layout computations.
force.start();
labelForce.start();


    </script>

             
    </div><!-- content container -->
  </div><!-- services page -->

  <div class="page" id="mission">
    <div class="content container">
      <h2>ACM Affiliation Analyzer</h2>      
      <div class="row">
        <p class="col-md-5 col-md-offset-1">In this work we study the collaboration between different organizations (Universities, Research Labs, Private companies, etc.) on scholarly published papers in Computer Science and Engineering field. We find the amount of collaboration between different organizations based on the number of the papers that they have published&nbsp;together. </p>
        <p class="col-md-5">We also compare the similarity of every two organizations using the keywords of the papers that they have published. For this study we use the information about published data in the conferences under ACM digital library. We provide an interactive visualization for our&nbsp;results.</p>
      </div><!-- row -->
    </div><!-- content container -->
  </div><!-- mission page -->

  <div class="page" id="staff">
    <div class="container-fluid">
      <h2 id="ourstaff">Our Team</h2>
      <div class="row">

        <div class="doctor col-lg-6">
          <div class="row">
            <div class="photo col-xs-6 col-xs-offset-3 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-2 col-lg-4 col-lg-offset-0">
              <img class="img-circle" src="images/sona-hasani.jpg" >
            </div><!-- photo -->
            <div class="info col-xs-8 col-xs-offset-2 col-sm-7 col-sm-offset-0 col-md-6 col-lg-8">
              <h3>Sona Hasani</h3>
              <p>PhD. Student</p>
              <p>University of Texas at Arlington</p>
            </div><!-- info -->
          </div> <!-- inner row -->
        </div> <!-- doctor -->

        <div class="doctor col-lg-6">
          <div class="row">
            <div class="photo col-xs-6 col-xs-offset-3 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-2 col-lg-4 col-lg-offset-0">
              <img class="img-circle" src="images/fatma-dogan.jpg" >
            </div><!-- photo -->
            <div class="info col-xs-8 col-xs-offset-2 col-sm-7 col-sm-offset-0 col-md-6 col-lg-8">
              <h3>Fatma Dogan</h3>
              <p>Ms. Student</p>
              <p>University of Texas at Arlington</p>
            </div><!-- info -->
          </div> <!-- inner row -->
        </div> <!-- doctor -->

      </div><!-- outer row -->
    </div><!-- container -->
  </div><!-- staff page -->
</div><!-- main -->

<footer>
  <div class="content container-fluid">
    <div class="row">
      <div class="col-sm-6">
        <p>All rights reserved.</p>    
      </div><!-- col-sm-6 -->
      <div class="col-sm-6">
        <nav class="navbar navbar-default" role="navigation">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Terms of use</a></li>
            <li><a href="#">Privacy policy</a></li>
          </ul>
        </nav>        
      </div><!-- col-sm-6 -->
    </div><!-- row -->
  </div><!-- content container -->
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="js/myscript.js"></script>
</body>

</html>
